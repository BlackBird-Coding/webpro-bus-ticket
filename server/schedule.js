import sqlite3 from "sqlite3";
let dbPath = "db/main.db";
import bcrypt from "bcrypt";

let db = new sqlite3.Database(dbPath, (err) => {
  if (err) {
    console.error("Error connecting to the database:", err.message);
  } else {
    console.log("Connected to the main database.");
  }
});

db.serialize(() => {
    db.run(`DELETE TABLE SCHEDULES`);
    // Create SCHEDULES table
  db.run(`CREATE TABLE IF NOT EXISTS Schedules (
    ScheduleID INTEGER PRIMARY KEY AUTOINCREMENT,
    ScheduleCode TEXT GENERATED ALWAYS AS (printf('H%03d', ScheduleID)),
    ScheduleName VARCHAR(100) NOT NULL,
    RouteID INTEGER NOT NULL,
    BusID INTEGER NOT NULL,
    EmployeeID INTEGER NOT NULL,
    DepartureTime DATETIME NOT NULL,
    ArrivalTime DATETIME NOT NULL,
    Price DECIMAL(10,2) NOT NULL,
    Description TEXT NOT NULL,
    FOREIGN KEY (RouteID) REFERENCES Routes(RouteID) ON DELETE CASCADE,
    FOREIGN KEY (BusID) REFERENCES Buses(BusID) ON DELETE CASCADE,
    FOREIGN KEY (EmployeeID) REFERENCES Employees(UserID) ON DELETE CASCADE
  );`);
  console.log("Tables created successfully.");

  db.run(`
    INSERT INTO Schedules (RouteID, BusID, ScheduleName, EmployeeID, DepartureTime, ArrivalTime, Price, Description) VALUES
(1, 1, 'กรุงเทพฯ - เชียงใหม่', 3, '2024-03-01 08:00:00', '2024-03-01 20:00:00', 800, 'รถโดยสารปรับอากาศ 1ชั้นไปเชียงใหม่'),
(2, 2, 'เชียงใหม่ - กรุงเทพฯ', 6, '2024-03-02 09:00:00', '2024-03-02 21:00:00', 850, 'รถโดยสารวีไอพีไปกรุงเทพฯ'),
(3, 3, 'กรุงเทพฯ - ภูเก็ต', 9, '2024-03-03 07:00:00', '2024-03-03 22:00:00', 1200, 'รถโดยสารปรับอากาศ 2ชั้นไปภูเก็ต'),
(4, 4, 'ภูเก็ต - กรุงเทพฯ', 13, '2024-03-04 08:00:00', '2024-03-04 23:00:00', 1250, 'รถโดยสารวีไอพีไปกรุงเทพฯ'),
(5, 5, 'กรุงเทพฯ - พัทยา', 17, '2024-03-05 10:00:00', '2024-03-05 13:00:00', 200, 'รถโดยสารปรับอากาศ 1ชั้นไปพัทยา'),
(6, 6, 'พัทยา - กรุงเทพฯ', 3, '2024-03-05 15:00:00', '2024-03-05 18:00:00', 220, 'รถโดยสารวีไอพีไปกรุงเทพฯ'),
(7, 7, 'กรุงเทพฯ - อยุธยา', 6, '2024-03-06 09:00:00', '2024-03-06 11:00:00', 100, 'รถโดยสารปรับอากาศ 2ชั้นไปอยุธยา'),
(8, 8, 'อยุธยา - กรุงเทพฯ', 9, '2024-03-06 13:00:00', '2024-03-06 15:00:00', 110, 'รถโดยสารวีไอพีไปกรุงเทพฯ'),
(9, 9, 'กรุงเทพฯ - หัวหิน', 13, '2024-03-07 10:00:00', '2024-03-07 14:00:00', 300, 'รถโดยสารปรับอากาศ 1ชั้นไปหัวหิน'),
(10, 10, 'หัวหิน - กรุงเทพฯ', 17, '2024-03-07 16:00:00', '2024-03-07 20:00:00', 320, 'รถโดยสารวีไอพีไปกรุงเทพฯ'),
(11, 11, 'กรุงเทพฯ - กระบี่', 3, '2024-03-08 06:00:00', '2024-03-08 22:00:00', 1000, 'รถโดยสารปรับอากาศ 2ชั้นไปกระบี่'),
(12, 12, 'กระบี่ - กรุงเทพฯ', 6, '2024-03-09 07:00:00', '2024-03-09 23:00:00', 1050, 'รถโดยสารวีไอพีไปกรุงเทพฯ'),
(13, 13, 'เชียงใหม่ - เชียงราย', 9, '2024-03-10 09:00:00', '2024-03-10 12:00:00', 250, 'รถโดยสารปรับอากาศ 1ชั้นไปเชียงราย'),
(14, 14, 'เชียงราย - เชียงใหม่', 13, '2024-03-10 14:00:00', '2024-03-10 17:00:00', 270, 'รถโดยสารวีไอพีไปเชียงใหม่'),
(15, 15, 'กรุงเทพฯ - หาดใหญ่', 17, '2024-03-11 18:00:00', '2024-03-12 10:00:00', 1100, 'รถโดยสารปรับอากาศ 2ชั้นไปหาดใหญ่'),
(1, 2, 'กรุงเทพฯ - เชียงใหม่', 3, '2024-03-12 07:00:00', '2024-03-12 19:00:00', 820, 'รถโดยสารวีไอพีไปเชียงใหม่'),
(2, 3, 'เชียงใหม่ - กรุงเทพฯ', 6, '2024-03-13 08:00:00', '2024-03-13 20:00:00', 870, 'รถโดยสารปรับอากาศ 2ชั้นไปกรุงเทพฯ'),
(3, 4, 'กรุงเทพฯ - ภูเก็ต', 9, '2024-03-14 06:00:00', '2024-03-14 21:00:00', 1220, 'รถโดยสารวีไอพีไปภูเก็ต'),
(4, 5, 'ภูเก็ต - กรุงเทพฯ', 13, '2024-03-15 07:00:00', '2024-03-15 22:00:00', 1270, 'รถโดยสารปรับอากาศ 1ชั้นไปกรุงเทพฯ'),
(5, 6, 'กรุงเทพฯ - พัทยา', 17, '2024-03-16 09:00:00', '2024-03-16 12:00:00', 210, 'รถโดยสารวีไอพีไปพัทยา'),
(6, 7, 'พัทยา - กรุงเทพฯ', 3, '2024-03-16 14:00:00', '2024-03-16 17:00:00', 230, 'รถโดยสารปรับอากาศ 2ชั้นไปกรุงเทพฯ'),
(7, 8, 'กรุงเทพฯ - อยุธยา', 6, '2024-03-17 08:00:00', '2024-03-17 10:00:00', 110, 'รถโดยสารวีไอพีไปอยุธยา'),
(8, 9, 'อยุธยา - กรุงเทพฯ', 9, '2024-03-17 12:00:00', '2024-03-17 14:00:00', 120, 'รถโดยสารปรับอากาศ 1ชั้นไปกรุงเทพฯ'),
(9, 10, 'กรุงเทพฯ - หัวหิน', 13, '2024-03-18 09:00:00', '2024-03-18 13:00:00', 310, 'รถโดยสารวีไอพีไปหัวหิน'),
(10, 11, 'หัวหิน - กรุงเทพฯ', 17, '2024-03-18 15:00:00', '2024-03-18 19:00:00', 330, 'รถโดยสารปรับอากาศ 2ชั้นไปกรุงเทพฯ'),
(11, 12, 'กรุงเทพฯ - กระบี่', 3, '2024-03-19 05:00:00', '2024-03-19 21:00:00', 1020, 'รถโดยสารวีไอพีไปกระบี่'),
(12, 13, 'กระบี่ - กรุงเทพฯ', 6, '2024-03-20 06:00:00', '2024-03-20 22:00:00', 1070, 'รถโดยสารปรับอากาศ 1ชั้นไปกรุงเทพฯ'),
(13, 14, 'เชียงใหม่ - เชียงราย', 9, '2024-03-21 08:00:00', '2024-03-21 11:00:00', 260, 'รถโดยสารวีไอพีไปเชียงราย'),
(14, 15, 'เชียงราย - เชียงใหม่', 13, '2024-03-21 13:00:00', '2024-03-21 16:00:00', 280, 'รถโดยสารปรับอากาศ 2ชั้นไปเชียงใหม่'),
(15, 1, 'กรุงเทพฯ - หาดใหญ่', 17, '2024-03-22 17:00:00', '2024-03-23 09:00:00', 1120, 'รถโดยสารปรับอากาศ 1ชั้นไปหาดใหญ่'),
(1, 3, 'กรุงเทพฯ - เชียงใหม่', 3, '2024-03-23 06:00:00', '2024-03-23 18:00:00', 840, 'รถโดยสารปรับอากาศ 2ชั้นไปเชียงใหม่'),
(2, 4, 'เชียงใหม่ - กรุงเทพฯ', 6, '2024-03-24 07:00:00', '2024-03-24 19:00:00', 890, 'รถโดยสารวีไอพีไปกรุงเทพฯ'),
(3, 5, 'กรุงเทพฯ - ภูเก็ต', 9, '2024-03-25 05:00:00', '2024-03-25 20:00:00', 1240, 'รถโดยสารปรับอากาศ 1ชั้นไปภูเก็ต'),
(4, 6, 'ภูเก็ต - กรุงเทพฯ', 13, '2024-03-26 06:00:00', '2024-03-26 21:00:00', 1290, 'รถโดยสารวีไอพีไปกรุงเทพฯ'),
(5, 7, 'กรุงเทพฯ - พัทยา', 17, '2024-03-27 08:00:00', '2024-03-27 11:00:00', 220, 'รถโดยสารปรับอากาศ 2ชั้นไปพัทยา'),
(6, 8, 'พัทยา - กรุงเทพฯ', 3, '2024-03-27 13:00:00', '2024-03-27 16:00:00', 240, 'รถโดยสารวีไอพีไปกรุงเทพฯ'),
(7, 9, 'กรุงเทพฯ - อยุธยา', 6, '2024-03-28 07:00:00', '2024-03-28 09:00:00', 120, 'รถโดยสารปรับอากาศ 1ชั้นไปอยุธยา'),
(8, 10, 'อยุธยา - กรุงเทพฯ', 9, '2024-03-28 11:00:00', '2024-03-28 13:00:00', 130, 'รถโดยสารวีไอพีไปกรุงเทพฯ'),
(9, 11, 'กรุงเทพฯ - หัวหิน', 13, '2024-03-29 08:00:00', '2024-03-29 12:00:00', 320, 'รถโดยสารปรับอากาศ 2ชั้นไปหัวหิน'),
(10, 12, 'หัวหิน - กรุงเทพฯ', 17, '2024-03-29 14:00:00', '2024-03-29 18:00:00', 340, 'รถโดยสารวีไอพีไปกรุงเทพฯ'),
((11, 13, 'กรุงเทพฯ - กระบี่', 3, '2024-03-30 04:00:00', '2024-03-30 20:00:00', 1040, 'รถโดยสารปรับอากาศ 1ชั้นไปกระบี่'),
(12, 14, 'กระบี่ - กรุงเทพฯ', 6, '2024-03-31 05:00:00', '2024-03-31 21:00:00', 1090, 'รถโดยสารวีไอพีไปกรุงเทพฯ'),
(13, 15, 'เชียงใหม่ - เชียงราย', 9, '2024-04-01 07:00:00', '2024-04-01 10:00:00', 270, 'รถโดยสารปรับอากาศ 2ชั้นไปเชียงราย'),
(14, 1, 'เชียงราย - เชียงใหม่', 13, '2024-04-01 12:00:00', '2024-04-01 15:00:00', 290, 'รถโดยสารปรับอากาศ 1ชั้นไปเชียงใหม่'),
(15, 2, 'กรุงเทพฯ - หาดใหญ่', 17, '2024-04-02 16:00:00', '2024-04-03 08:00:00', 1140, 'รถโดยสารวีไอพีไปหาดใหญ่'),
(1, 3, 'กรุงเทพฯ - เชียงใหม่', 3, '2024-04-03 05:00:00', '2024-04-03 17:00:00', 860, 'รถโดยสารปรับอากาศ 2ชั้นไปเชียงใหม่'),
(2, 4, 'เชียงใหม่ - กรุงเทพฯ', 6, '2024-04-04 06:00:00', '2024-04-04 18:00:00', 910, 'รถโดยสารวีไอพีไปกรุงเทพฯ'),
(3, 5, 'กรุงเทพฯ - ภูเก็ต', 9, '2024-04-05 04:00:00', '2024-04-05 19:00:00', 1260, 'รถโดยสารปรับอากาศ 1ชั้นไปภูเก็ต'),
(4, 6, 'ภูเก็ต - กรุงเทพฯ', 13, '2024-04-06 05:00:00', '2024-04-06 20:00:00', 1310, 'รถโดยสารวีไอพีไปกรุงเทพฯ'),
(5, 7, 'กรุงเทพฯ - พัทยา', 17, '2024-04-07 07:00:00', '2024-04-07 10:00:00', 230, 'รถโดยสารปรับอากาศ 2ชั้นไปพัทยา'),
(6, 8, 'พัทยา - กรุงเทพฯ', 3, '2024-04-07 12:00:00', '2024-04-07 15:00:00', 250, 'รถโดยสารวีไอพีไปกรุงเทพฯ'),
(7, 9, 'กรุงเทพฯ - อยุธยา', 6, '2024-04-08 06:00:00', '2024-04-08 08:00:00', 130, 'รถโดยสารปรับอากาศ 1ชั้นไปอยุธยา'),
(8, 10, 'อยุธยา - กรุงเทพฯ', 9, '2024-04-08 10:00:00', '2024-04-08 12:00:00', 140, 'รถโดยสารวีไอพีไปกรุงเทพฯ'),
(9, 11, 'กรุงเทพฯ - หัวหิน', 13, '2024-04-09 07:00:00', '2024-04-09 11:00:00', 330, 'รถโดยสารปรับอากาศ 2ชั้นไปหัวหิน'),
(10, 12, 'หัวหิน - กรุงเทพฯ', 17, '2024-04-09 13:00:00', '2024-04-09 17:00:00', 350, 'รถโดยสารวีไอพีไปกรุงเทพฯ'),
(11, 13, 'กรุงเทพฯ - กระบี่', 3, '2024-04-10 03:00:00', '2024-04-10 19:00:00', 1060, 'รถโดยสารปรับอากาศ 1ชั้นไปกระบี่'),
(12, 14, 'กระบี่ - กรุงเทพฯ', 6, '2024-04-11 04:00:00', '2024-04-11 20:00:00', 1110, 'รถโดยสารวีไอพีไปกรุงเทพฯ'),
(13, 15, 'เชียงใหม่ - เชียงราย', 9, '2024-04-12 06:00:00', '2024-04-12 09:00:00', 280, 'รถโดยสารปรับอากาศ 2ชั้นไปเชียงราย'),
(14, 1, 'เชียงราย - เชียงใหม่', 13, '2024-04-12 11:00:00', '2024-04-12 14:00:00', 300, 'รถโดยสารปรับอากาศ 1ชั้นไปเชียงใหม่'),
(15, 2, 'กรุงเทพฯ - หาดใหญ่', 17, '2024-04-13 15:00:00', '2024-04-14 07:00:00', 1160, 'รถโดยสารวีไอพีไปหาดใหญ่'),
(1, 3, 'กรุงเทพฯ - เชียงใหม่', 3, '2024-04-14 04:00:00', '2024-04-14 16:00:00', 880, 'รถโดยสารปรับอากาศ 2ชั้นไปเชียงใหม่'),`)
});

